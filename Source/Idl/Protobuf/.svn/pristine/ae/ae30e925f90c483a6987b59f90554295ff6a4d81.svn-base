import "Common.proto";
import "Player.proto";
import "Contest.proto";
import "Slots.proto";

message SlotsFruitSliceContest_Enter_Request
{
	optional Header header = 1;
	optional Player player = 2;
}

message SlotsFruitSliceContest_Enter_Response
{
	optional Header header = 1;
	required Return ret = 2;
	optional Table table = 3;
	optional string channel_id = 4;
    optional int64 bonus = 5;
}

message SlotsFruitSliceContest_Enter_Notice
{
	optional Header header = 1;
	required Seat seat = 2;
}

message SlotsFruitSliceContest_Exit_Request
{
	optional Header header = 1;
	optional int64 player_id = 2;
}

message SlotsFruitSliceContest_Exit_Response
{
	optional Header header = 1;
	required Return ret = 2;
	optional Table table = 3;
	optional string channel_id = 4;
}

message SlotsFruitSliceContest_Exit_Notice
{
	optional Header header = 1;
	required Seat seat = 2;
}

//掉线
message SlotsFruitSliceContest_Offline_Request
{
	optional Header header = 1;
	required int64 player_id = 2;
}

message SlotsFruitSliceContest_Offline_Response
{
	optional Header header = 1;
	required Return ret = 2;
}

message SlotsFruitSliceContest_Offline_Notice
{
	optional Header header = 1;
	required Seat seat = 2;
}

message SlotsFruitSliceContest_Hotfix_Request
{
    optional Header header = 1;
    optional string process_name = 2;
    repeated string module_path = 3;
    repeated string module_name = 4;
}

message SlotsFruitSliceContest_Hotfix_Response
{
	optional Header header = 1;
	required Return ret = 2;
}

//start request,当产生了bonus+1的时候发这个
message SlotsFruitSliceContest_Start_Request
{
	optional Header header = 1;
	optional int64 player_id = 2;
    optional int64 erase_times = 3;//用于计算发开始小游戏通知的延迟时间,该时间由本次spin的消除次数决定
}

message SlotsFruitSliceContest_Start_Response
{
	optional Header header = 1;
	required Return ret = 2;
}

message SlotsFruitSliceContest_Slice_Request
{
	optional Header header = 1;
	optional int64 player_id = 2;
	repeated int64 fruit_id = 3;
	optional int64 win_chip = 4;
}

message SlotsFruitSliceContest_Slice_Response
{
	optional Header header = 1;
	required Return ret = 2;
}

//小游戏的状态通知,状态包含prepare, start, end
message SlotsFruitSliceContest_StateSync_Notice
{
	optional Header header = 1;
	optional int64 state = 2;//state:1,2,3对应prepare, start ,end
}

//小游戏推送水果的通知
message SlotsFruitSliceContest_Fruit_Notice
{
	optional Header header = 1;
	repeated int64 fruit_id = 2;
	repeated int64 fruit_type = 3;
    optional int64 timestamp = 4;
}

//小游戏推送某个水果已经被切掉的通知
message SlotsFruitSliceContest_FruitSliced_Notice
{
	optional Header header = 1;
	repeated int64 fruit_id = 2;
    repeated Slots_FruitExplode fruit_explode = 3;
}

//小游戏进度增加通知
message SlotsFruitSliceContest_Bonus_Notice
{
	optional Header header = 1;
	optional int64 bonus = 2;
    optional int64 trigger_player = 3;
}

//定时推送玩家得分
message SlotsFruitSliceContest_PlayerScore_Notice
{
	optional Header header = 1;
	repeated Seat seat = 2;
	repeated int64 player_score = 3;
}